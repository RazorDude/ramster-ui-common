{"version":3,"sources":["ng://ramster-ui-core/components/componentInjector/componentInjector.directive.ts","ng://ramster-ui-core/components/componentInjector/componentInjector.component.ts","ng://ramster-ui-core/components/base-layout.component.ts","ng://ramster-ui-core/components/base-page.component.ts","node_modules/tslib/tslib.es6.js","ng://ramster-ui-core/services/globalEvents/globalEvents.service.ts","ng://ramster-ui-core/services/request.service.ts","ng://ramster-ui-core/services/baseREST.service.ts","ng://ramster-ui-core/services/filesREST.service.ts","ng://ramster-ui-core/services/modelRESTServiceProvider.service.ts","ng://ramster-ui-core/utils/toolbelt.ts","ng://ramster-ui-core/index.ts"],"names":["ComponentInjectorAreaDirective","Directive","args","selector","ViewContainerRef","viewContainerRef","this","ComponentInjector","prototype","ngAfterViewInit","componentFactory","componentFactoryResolver","resolveComponentFactory","component","componentRef","clear","componentRefInstance","createComponent","instance","data","cdRef","detectChanges","Component","template","ChangeDetectorRef","ComponentFactoryResolver","ViewChild","Input","BaseLayoutComponent","ngOnInit","_this","globalEventsService","pageLoaded$","subscribe","pageLoaded","triggerInitialDataLoad$","loadInitialData","setLayoutData$","setLayoutData","redirect$","_a","route","options","redirect","toggleLoader$","active","toggleLoader","sendInitialDataLoadedEvent","initialDataLoaded","queryParams","routeParams","key","actualOptions","reloadInitialData","router","navigate","loaderActive","BasePageComponent","initialDataLoaded$","pipe","takeUntil","destroyed","layoutDataChanged$","layoutDataChanged","onInitMethodNames","forEach","methodName","reset","activatedRoute","snapshot","params","sendPageLoadedEvent","loggedInUser","user","onInitialDataLoadedMethodNames","_data","destructor","next","complete","ngOnDestroy","Subject","__generator","thisArg","body","f","y","t","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","n","v","step","op","TypeError","call","done","value","pop","length","push","e","GlobalEventsService","pageLoadedSource","triggerInitialDataLoad","triggerInitialDataLoadSource","initialDataLoadedSource","setLayoutDataSource","layoutDataChangedSource","redirectSource","notify","type","message","notifySource","toggleLoaderSource","Injectable","asObservable","notify$","RequestService","flattenObjectForQuery","object","parentKey","returnObject","Array","error","item","Date","concat","run","method","url","Promise","resolve","reject","actualUrl_1","runOptions_1","requestOptions","resolveWithFullResponse","__rest","s","p","Object","hasOwnProperty","indexOf","getOwnPropertySymbols","i","toLowerCase","optionsParams","getTime","toString","index","client","request","HttpRequest","toPromise","then","response","HttpClient","BaseRESTService","emptyToNull","map","parsedData","stringifyGetParams","stringifiedObject","JSON","stringify","handleError","err","notifyOnError","redirectOnForbiddenUrl","status","fileTooLargeErrorMessage","create","co","requestService","baseUrl","headers","res","read","readList","streamReadList","onMessage","onError","reconnectAttemptInterval","errorHandler","bind","reconnectAttemptsLeft","window","location","origin","stringifiedParams","firstParam","eventSource","EventSource","closeSubject","reconnectAllowed","onmessage","event","onerror","interval","setInterval","readyState","clearInterval","close","readSelectList","update","id","bulkUpsert","delete","HttpHeaders","Content-Type","FilesRESTService","upload","file","fd","FormData","append","name","set","success","ModelRESTServiceProviderService","get","componentName","modelRESTServices","setServices","keys","charAt","substr","injector","Injector","getNested","parent","field","undefined","arrayItemsShouldBeUnique","fieldData","split","fieldDataLength","currentElement","innerElementName","closingBracketFound","closingBracketIndex","element","j","nextElement","isNaN","parseInt","innerPath_1","innerValue","innerValueItem","out_i_1","NgModule","imports","CommonModule","declarations","exports","RamsterUICoreModule","fieldNames","currentParent","loopEnd","fieldName"],"mappings":"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","sourcesContent":["import {Directive, ViewContainerRef} from '@angular/core'\r\n\r\n@Directive({\r\n\tselector: '[component-injector-area]'\r\n})\r\nexport class ComponentInjectorAreaDirective {\r\n\tconstructor(public viewContainerRef: ViewContainerRef) {\r\n\t}\r\n}\r\n","import {AfterViewInit, Component, ChangeDetectorRef, ComponentFactoryResolver, Input, ViewChild} from '@angular/core'\r\nimport {ComponentInjectorAreaDirective} from './componentInjector.directive'\r\n\r\n@Component({\r\n\tselector: 'component-injector',\r\n\ttemplateUrl: './componentInjector.template.html'\r\n})\r\nexport class ComponentInjector implements AfterViewInit {\r\n\tcomponentRefInstance: any\r\n\r\n\t@ViewChild(ComponentInjectorAreaDirective) componentRef: ComponentInjectorAreaDirective\r\n\t@Input() component: any\r\n\t@Input() data: any\r\n\r\n\tconstructor(\r\n\t\tprivate cdRef:ChangeDetectorRef,\r\n\t\tprivate componentFactoryResolver: ComponentFactoryResolver) {\r\n\t}\r\n\r\n\tngAfterViewInit() {\r\n\t\tlet componentFactory = this.componentFactoryResolver.resolveComponentFactory(this.component),\r\n\t\t\tviewContainerRef = this.componentRef.viewContainerRef\r\n\t\tviewContainerRef.clear()\r\n\t\tthis.componentRefInstance = viewContainerRef.createComponent(componentFactory).instance\r\n\t\tthis.componentRefInstance.data = this.data\r\n\t\tthis.cdRef.detectChanges()\r\n\t}\r\n}\r\n","import {OnInit} from '@angular/core'\r\nimport {Router} from '@angular/router'\r\n\r\nimport {GlobalEventsService} from '../services/globalEvents/globalEvents.service'\r\nimport {GESRedirectOptionsInterface} from '../services/globalEvents/globalEvents.interfaces'\r\n\r\n\r\nexport class BaseLayoutComponent implements OnInit {\r\n\tinitialDataLoaded: boolean = false\r\n\tloaderActive: boolean = false\r\n\tqueryParams: {[x: string]: string} = {}\r\n\trouteParams: {[x: string]: string} = {}\r\n\r\n\tconstructor(\r\n\t\tpublic globalEventsService: GlobalEventsService,\r\n\t\tpublic router: Router\r\n\t) {\r\n\t}\r\n\r\n\tngOnInit(): void {\r\n\t\tthis.globalEventsService.pageLoaded$.subscribe((data?: {[x: string]: any}) => this.pageLoaded(data))\r\n\t\tthis.globalEventsService.triggerInitialDataLoad$.subscribe(() => this.loadInitialData())\r\n\t\tthis.globalEventsService.setLayoutData$.subscribe((data) => this.setLayoutData(data))\r\n\t\tthis.globalEventsService.redirect$.subscribe(({route, options}) => this.redirect(route, options))\r\n\t\tthis.globalEventsService.toggleLoader$.subscribe((active) => this.toggleLoader(active))\r\n\t}\r\n\r\n\tsendInitialDataLoadedEvent() {\r\n\t\tthis.globalEventsService.initialDataLoaded({queryParams: this.queryParams, routeParams: this.routeParams})\r\n\t}\r\n\r\n\r\n\t// globalEventsService handlers\r\n\r\n\tpageLoaded(data?: {[x: string]: any}): void {\r\n\t\tif (data) {\r\n\t\t\tfor (const key in data) {\r\n\t\t\t\tthis[key] = data[key]\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.initialDataLoaded) {\r\n\t\t\tthis.sendInitialDataLoadedEvent()\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.loadInitialData()\r\n\t}\r\n\r\n\tloadInitialData(): void {\r\n\t\tthis.sendInitialDataLoadedEvent()\r\n\t}\r\n\r\n\tsetLayoutData(args: {[x: string]: any}) {\r\n\t\tfor (const key in args) {\r\n\t\t\tthis[key] = args[key]\r\n\t\t}\r\n\t}\r\n\r\n\tredirect(route: string, options: GESRedirectOptionsInterface): void {\r\n\t\tconst actualOptions = options || {},\r\n\t\t\t{queryParams, reloadInitialData} = actualOptions\r\n\t\tif (reloadInitialData) {\r\n\t\t\tthis.initialDataLoaded = false\r\n\t\t}\r\n\t\tthis.router.navigate([route], {queryParams: queryParams || {}})\r\n\t}\r\n\r\n\ttoggleLoader(active: boolean): void {\r\n\t\tthis.loaderActive = active\r\n\t}\r\n}\r\n","'use strict'\r\n\r\nimport {ActivatedRoute} from '@angular/router'\r\nimport {OnDestroy, OnInit} from '@angular/core'\r\nimport {Subject} from 'rxjs'\r\nimport {takeUntil} from 'rxjs/operators'\r\n\r\nimport {GlobalEventsService} from '../services/globalEvents/globalEvents.service'\r\n\r\nexport class BasePageComponent implements OnInit, OnDestroy {\r\n\tdestroyed: Subject<void> = new Subject()\r\n\tloggedInUser?: any\r\n\tqueryParams: {[x: string]: string}\r\n\trouteParams: {[x: string]: string}\r\n\r\n\tconstructor(\r\n\t\tpublic activatedRoute: ActivatedRoute,\r\n\t\tpublic globalEventsService: GlobalEventsService,\r\n\t\tpublic onInitMethodNames: string[],\r\n\t\tpublic onInitialDataLoadedMethodNames: string[]\r\n\t) {\r\n\t}\r\n\r\n\tngOnInit() {\r\n\t\tthis.globalEventsService.initialDataLoaded$.pipe(takeUntil(this.destroyed)).subscribe((data) => this.initialDataLoaded(data))\r\n\t\tthis.globalEventsService.layoutDataChanged$.pipe(takeUntil(this.destroyed)).subscribe((data) => this.layoutDataChanged(data))\r\n\t\tthis.onInitMethodNames.forEach((methodName) => {\r\n\t\t\tif (typeof this[methodName] === 'function') {\r\n\t\t\t\tthis[methodName]()\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\treset(): void {\r\n\t\tthis.queryParams = this.activatedRoute.snapshot.queryParams\r\n\t\tthis.routeParams = this.activatedRoute.snapshot.params\r\n\t}\r\n\r\n\tsendPageLoadedEvent() {\r\n\t\tthis.globalEventsService.pageLoaded({queryParams: this.queryParams, routeParams: this.routeParams})\r\n\t}\r\n\r\n\tinitialDataLoaded(data: {[fieldName: string]: any}): void {\r\n\t\tthis.loggedInUser = data.user\r\n\t\tthis.queryParams = data.queryParams\r\n\t\tthis.routeParams = data.routeParams\r\n\t\tthis.onInitialDataLoadedMethodNames.forEach((methodName) => {\r\n\t\t\tif (typeof this[methodName] === 'function') {\r\n\t\t\t\tthis[methodName](data)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tlayoutDataChanged(_data: {[fieldName: string]: any}) {\r\n\t}\r\n\r\n\tdestructor() {\r\n\t\tthis.destroyed.next()\r\n\t\tthis.destroyed.complete()\r\n\t}\r\n\r\n\tngOnDestroy() {\r\n\t\tthis.destructor()\r\n\t}\r\n}\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import {Injectable} from '@angular/core'\r\nimport {Subject} from 'rxjs'\r\nimport {GESRedirectOptionsInterface} from './globalEvents.interfaces'\r\n\r\n@Injectable()\r\nexport class GlobalEventsService {\r\n\tpageLoadedSource = new Subject<{[x: string]: any} | void>()\r\n\ttriggerInitialDataLoadSource = new Subject<void>()\r\n\tinitialDataLoadedSource = new Subject<any>()\r\n\tsetLayoutDataSource = new Subject<{[x: string]: any}>()\r\n\tlayoutDataChangedSource = new Subject<{[x: string]: any}>()\r\n\tredirectSource = new Subject<{route: string, options: GESRedirectOptionsInterface}>()\r\n\tnotifySource = new Subject<{type: string, message: string}>()\r\n\ttoggleLoaderSource = new Subject<boolean>()\r\n\r\n\tpageLoaded$ = this.pageLoadedSource.asObservable()\r\n\ttriggerInitialDataLoad$ = this.triggerInitialDataLoadSource.asObservable()\r\n\tinitialDataLoaded$ = this.initialDataLoadedSource.asObservable()\r\n\tsetLayoutData$ = this.setLayoutDataSource.asObservable()\r\n\tlayoutDataChanged$ = this.layoutDataChangedSource.asObservable()\r\n\tredirect$ = this.redirectSource.asObservable()\r\n\tnotify$ = this.notifySource.asObservable()\r\n\ttoggleLoader$ = this.toggleLoaderSource.asObservable()\r\n\r\n\tpageLoaded(data): void {\r\n\t\tthis.pageLoadedSource.next(data)\r\n\t}\r\n\r\n\ttriggerInitialDataLoad(): void {\r\n\t\tthis.triggerInitialDataLoadSource.next()\r\n\t}\r\n\r\n\tinitialDataLoaded(data): void {\r\n\t\tthis.initialDataLoadedSource.next(data)\r\n\t}\r\n\r\n\tsetLayoutData(data): void {\r\n\t\tthis.setLayoutDataSource.next(data)\r\n\t}\r\n\r\n\tlayoutDataChanged(data): void {\r\n\t\tthis.layoutDataChangedSource.next(data)\r\n\t}\r\n\r\n\tredirect(route: string, options?: GESRedirectOptionsInterface): void {\r\n\t\tthis.redirectSource.next({route, options})\r\n\t}\r\n\r\n\tnotify(type: string, message: string): void {\r\n\t\tthis.notifySource.next({type, message})\r\n\t}\r\n\r\n\ttoggleLoader(active: boolean): void {\r\n\t\tthis.toggleLoaderSource.next(active)\r\n\t}\r\n}\r\n","import {Injectable} from '@angular/core'\r\nimport {HttpClient, HttpRequest, HttpResponse} from '@angular/common/http'\r\n\r\n\r\n@Injectable()\r\nexport class RequestService {\r\n\tconstructor(public client: HttpClient) {}\r\n\r\n\tflattenObjectForQuery(object: {[x: string]: any} | any[], parentKey?: string): {key: string, value: any}[] {\r\n\t\tlet returnObject = []\r\n\t\tif (object instanceof Array) {\r\n\t\t\tif (!parentKey) {\r\n\t\t\t\tthrow {error: 'The top-most item cannot be an array.'}\r\n\t\t\t}\r\n\t\t\tobject.forEach((item) => {\r\n\t\t\t\tif (item === null) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif ((item instanceof Date) || !(item instanceof Array)  || (typeof item !== 'object')) {\r\n\t\t\t\t\treturnObject.push({key: `${parentKey}[]`, value: item})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\treturnObject = returnObject.concat(this.flattenObjectForQuery(item, `${parentKey}[]`))\r\n\t\t\t\treturn\r\n\t\t\t})\r\n\t\t\treturn returnObject\r\n\t\t}\r\n\t\tfor (const key in object) {\r\n\t\t\tconst value = object[key]\r\n\t\t\tif (value === null) {\r\n\t\t\t\tcontinue\r\n\t\t\t}\r\n\t\t\tif ((value instanceof Date) || (typeof value !== 'object')) {\r\n\t\t\t\treturnObject.push({key: parentKey ? `${parentKey}[${key}]`: key, value})\r\n\t\t\t\tcontinue\r\n\t\t\t}\r\n\t\t\treturnObject = returnObject.concat(this.flattenObjectForQuery(value, parentKey ? `${parentKey}[${key}]` : key))\r\n\t\t}\r\n\t\treturn returnObject\r\n\t}\r\n\r\n\trun(method: string, url: string, options?: {[x: string]: any}) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\ttry {\r\n\t\t\t\tlet actualUrl = url,\r\n\t\t\t\t\trunOptions = {} as any,\r\n\t\t\t\t\trequestOptions = {} as any,\r\n\t\t\t\t\tbody = null\r\n\t\t\t\tif (options && (typeof options === 'object')) {\r\n\t\t\t\t\tlet {resolveWithFullResponse, ... otherOptions} = options\r\n\t\t\t\t\trequestOptions = otherOptions\r\n\t\t\t\t\trunOptions = {resolveWithFullResponse}\r\n\t\t\t\t}\r\n\t\t\t\tif (method.toLowerCase() === 'get') {\r\n\t\t\t\t\tif (!requestOptions || (typeof requestOptions !== 'object')) {\r\n\t\t\t\t\t\trequestOptions = {}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst optionsParams = this.flattenObjectForQuery(requestOptions.params || {})\r\n\t\t\t\t\tactualUrl += `?_=${(new Date()).getTime().toString()}`\r\n\t\t\t\t\tif (optionsParams.length) {\r\n\t\t\t\t\t\toptionsParams.forEach((item, index) => {\r\n\t\t\t\t\t\t\tactualUrl += `&${item.key}=${item.value}`\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!requestOptions || (typeof requestOptions !== 'object')) {\r\n\t\t\t\t\t\trequestOptions = {}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbody = (!requestOptions.body || (typeof requestOptions.body !== 'object')) ? {} : requestOptions.body\r\n\t\t\t\t\tbody._ = (new Date()).getTime()\r\n\t\t\t\t\tdelete requestOptions.body\r\n\t\t\t\t}\r\n\t\t\t\t// if (!requestOptions.responseType) {}\r\n\t\t\t\tthis.client.request(new HttpRequest(method, actualUrl, body, requestOptions)).toPromise().then(\r\n\t\t\t\t\t(response: HttpResponse<any>) => runOptions.resolveWithFullResponse ? resolve(response) : resolve(response.body),\r\n\t\t\t\t\t(error: any) => reject(error)\r\n\t\t\t\t)\r\n\t\t\t} catch(error) {\r\n\t\t\t\treject(error)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n","import co from 'co'\r\nimport {HttpHeaders} from '@angular/common/http'\r\nimport {GlobalEventsService} from './globalEvents/globalEvents.service'\r\nimport {Injectable} from '@angular/core'\r\nimport {RequestService} from './request.service'\r\nimport {Subject} from 'rxjs'\r\n\r\n@Injectable()\r\nexport class BaseRESTService {\r\n\tbaseUrl = '/'\r\n\tfileTooLargeErrorMessage?: string = 'The selected file is too large.'\r\n\theaders = new HttpHeaders({'Content-Type': 'application/json'})\r\n\tredirectOnForbiddenUrl?: string = null\r\n\r\n\tconstructor(\r\n\t\tpublic globalEventsService: GlobalEventsService,\r\n\t\tpublic requestService: RequestService\r\n\t) {}\r\n\r\n\temptyToNull(data: any): any {\r\n\t\tif (data === '') {\r\n\t\t\treturn null\r\n\t\t}\r\n\t\tif (data instanceof Date) {\r\n\t\t\treturn data\r\n\t\t}\r\n\t\tif (data instanceof Array) {\r\n\t\t\treturn data.map((item, index) => this.emptyToNull(item))\r\n\t\t}\r\n\t\tif ((typeof data === 'object') && (data !== null)) {\r\n\t\t\tconst parsedData = {}\r\n\t\t\tfor (const key in data) {\r\n\t\t\t\tparsedData[key] = this.emptyToNull(data[key])\r\n\t\t\t}\r\n\t\t\treturn parsedData\r\n\t\t}\r\n\t\treturn data\r\n\t}\r\n\r\n\tstringifyGetParams(data: {[key: string]: any}): {[key: string]: any} {\r\n\t\tlet stringifiedObject = {}\r\n\t\tfor (const key in data) {\r\n\t\t\tconst value = data[key]\r\n\t\t\tif ((value instanceof Array) || ((typeof value === 'object') && (value !== null) && !(value instanceof Date))) {\r\n\t\t\t\tstringifiedObject[`_json_${key}`] = JSON.stringify(value)\r\n\t\t\t\tcontinue\r\n\t\t\t}\r\n\t\t\tstringifiedObject[key] = value\r\n\t\t}\r\n\t\treturn stringifiedObject\r\n\t}\r\n\r\n\thandleError(err: any, options?: {notifyOnError?: boolean}): void {\r\n\t\tconst {notifyOnError} = options || {} as any\r\n\t\tif (!err) {\r\n\t\t\tif (notifyOnError !== false) {\r\n\t\t\t\tthis.globalEventsService.notify('error', 'An unknown error has occurred.')\r\n\t\t\t}\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (this.redirectOnForbiddenUrl && ((err.status === 401) || (err.error && (err.error.status === 401)))) {\r\n\t\t\tthis.globalEventsService.redirect(this.redirectOnForbiddenUrl)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif ((err.status === 413) || (err.error && (err.error.status === 413))) {\r\n\t\t\tthis.globalEventsService.notify('error', this.fileTooLargeErrorMessage)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (notifyOnError !== false) {\r\n\t\t\tthis.globalEventsService.notify('error', err.error && err.error.error || 'An error has occurred.')\r\n\t\t}\r\n\t}\r\n\r\n\tcreate(params): Promise<any> {\r\n\t\tconst instance = this\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tco(function*() {\r\n\t\t\t\treturn yield instance.requestService.run('post', `${instance.baseUrl}`, {\r\n\t\t\t\t\theaders: instance.headers,\r\n\t\t\t\t\tbody: instance.emptyToNull(params)\r\n\t\t\t\t})\r\n\t\t\t}).then((res) => resolve(res), (err) => {\r\n\t\t\t\tinstance.handleError(err)\r\n\t\t\t\treject({error: true})\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tread(params): Promise<any> {\r\n\t\tconst instance = this\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tco(function*() {\r\n\t\t\t\treturn yield instance.requestService.run('get', `${instance.baseUrl}/item`, {\r\n\t\t\t\t\theaders: instance.headers,\r\n\t\t\t\t\tparams: instance.stringifyGetParams(instance.emptyToNull(params))\r\n\t\t\t\t})\r\n\t\t\t}).then((res) => resolve(res), (err) => {\r\n\t\t\t\tinstance.handleError(err)\r\n\t\t\t\treject({error: true})\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\treadList(params): Promise<any> {\r\n\t\tconst instance = this\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tco(function*() {\r\n\t\t\t\treturn yield instance.requestService.run('get', `${instance.baseUrl}`, {\r\n\t\t\t\t\theaders: instance.headers,\r\n\t\t\t\t\tparams: instance.stringifyGetParams(instance.emptyToNull(params))\r\n\t\t\t\t})\r\n\t\t\t}).then((res) => resolve(res), (err) => {\r\n\t\t\t\tinstance.handleError(err)\r\n\t\t\t\treject({error: true})\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tstreamReadList(\r\n\t\tparams: {[key: string]: any},\r\n\t\tonMessage: Function,\r\n\t\toptions?: {onError?: Function, reconnectAttemptInterval?: number, reconnectAttemptsLeft?: number}\r\n\t): Subject<void> {\r\n\t\tconst actualOptions = options || {},\r\n\t\t\t{onError, reconnectAttemptInterval} = actualOptions,\r\n\t\t\terrorHandler = onError ? onError : this.handleError.bind(this)\r\n\t\tlet reconnectAttemptsLeft = actualOptions.reconnectAttemptsLeft,\r\n\t\t\turl = `${window.location.origin}${this.baseUrl}/streamList`,\r\n\t\t\tstringifiedParams = this.stringifyGetParams(this.emptyToNull(params)),\r\n\t\t\tfirstParam = true\r\n\t\tfor (const key in stringifiedParams) {\r\n\t\t\tif (firstParam) {\r\n\t\t\t\tfirstParam = false\r\n\t\t\t\turl += '?'\r\n\t\t\t} else {\r\n\t\t\t\turl += '&'\r\n\t\t\t}\r\n\t\t\turl += `${key}=${stringifiedParams[key]}`\r\n\t\t}\r\n\t\tlet eventSource = new EventSource(url),\r\n\t\t\tcloseSubject = new Subject<void>(),\r\n\t\t\treconnectAllowed = {value: true}\r\n\t\teventSource.onmessage = (event) => onMessage(event)\r\n\t\teventSource.onerror = (err) => errorHandler(err)\r\n\t\tlet interval = setInterval(() => {\r\n\t\t\tif (\r\n\t\t\t\t(eventSource.readyState === 2) &&\r\n\t\t\t\treconnectAllowed.value &&\r\n\t\t\t\t((typeof reconnectAttemptsLeft === 'undefined') || reconnectAttemptsLeft > 0)\r\n\t\t\t) {\r\n\t\t\t\teventSource = new EventSource(url)\r\n\t\t\t\teventSource.onmessage = (event) => onMessage(event)\r\n\t\t\t\teventSource.onerror = (err) => errorHandler(err)\r\n\t\t\t\tif (typeof reconnectAttemptsLeft !== 'undefined') {\r\n\t\t\t\t\treconnectAttemptsLeft--\r\n\t\t\t\t}\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tclearInterval(interval)\r\n\t\t}, reconnectAttemptInterval || 5000)\r\n\t\tcloseSubject.subscribe(() => {\r\n\t\t\treconnectAllowed.value = false\r\n\t\t\teventSource.close()\r\n\t\t})\r\n\t\treturn closeSubject\r\n\t}\r\n\r\n\treadSelectList(params): Promise<any> {\r\n\t\tconst instance = this\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tco(function*() {\r\n\t\t\t\treturn yield instance.requestService.run('get', `${instance.baseUrl}/selectList`, {\r\n\t\t\t\t\theaders: instance.headers,\r\n\t\t\t\t\tparams: instance.stringifyGetParams(instance.emptyToNull(params))\r\n\t\t\t\t})\r\n\t\t\t}).then((res) => resolve(res), (err) => {\r\n\t\t\t\tinstance.handleError(err)\r\n\t\t\t\treject({error: true})\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tupdate(params): Promise<any> {\r\n\t\tconst instance = this\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tco(function*() {\r\n\t\t\t\treturn yield instance.requestService.run('patch', `${instance.baseUrl}/item/${params.id}`, {\r\n\t\t\t\t\theaders: instance.headers,\r\n\t\t\t\t\tbody: instance.emptyToNull(params)\r\n\t\t\t\t})\r\n\t\t\t}).then((res) => resolve(res), (err) => {\r\n\t\t\t\tinstance.handleError(err)\r\n\t\t\t\treject({error: true})\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tbulkUpsert(params): Promise<any> {\r\n\t\tconst instance = this\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tco(function*() {\r\n\t\t\t\treturn yield instance.requestService.run('put', `${instance.baseUrl}`, {\r\n\t\t\t\t\theaders: instance.headers,\r\n\t\t\t\t\tbody: instance.emptyToNull(params)\r\n\t\t\t\t})\r\n\t\t\t}).then((res) => resolve(res), (err) => {\r\n\t\t\t\tinstance.handleError(err)\r\n\t\t\t\treject({error: true})\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tdelete(params): Promise<any> {\r\n\t\tconst instance = this\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tco(function*() {\r\n\t\t\t\treturn yield instance.requestService.run('delete', `${instance.baseUrl}/${params.id}`, {\r\n\t\t\t\t\theaders: instance.headers,\r\n\t\t\t\t\tbody: instance.emptyToNull(params)\r\n\t\t\t\t})\r\n\t\t\t}).then((res) => resolve(res), (err) => {\r\n\t\t\t\tinstance.handleError(err)\r\n\t\t\t\treject({error: true})\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n}\r\n","import co from 'co'\r\nimport {Injectable} from '@angular/core'\r\nimport {HttpHeaders} from '@angular/common/http'\r\n\r\nimport {GlobalEventsService} from './globalEvents/globalEvents.service'\r\nimport {RequestService} from './request.service'\r\n\r\n@Injectable()\r\nexport class FilesRESTService {\r\n\t// {'Content-Type': 'application/json'}\r\n\theaders = new HttpHeaders()\r\n\tbaseUrl = '/files'\r\n\r\n\tconstructor(\r\n\t\tpublic globalEventsService: GlobalEventsService,\r\n\t\tpublic requestService: RequestService\r\n\t) {}\r\n\r\n\thandleError(err: any): void {\r\n\t\tif (!err) {\r\n\t\t\tthis.globalEventsService.notify('error', 'An unknown error has occurred.')\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif ((err.status === 413) || (err.error && (err.error.status === 413))) {\r\n\t\t\tthis.globalEventsService.notify('error', 'The selected file is too large.')\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.globalEventsService.notify('error', err.error && err.error.error || 'An error has occurred.')\r\n\t}\r\n\r\n\tupload(file: File, params: {outputFileName: string, [x: string]: any}, options?: {handleError?: boolean}): Promise<any> {\r\n\t\tconst instance = this\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tco(function*() {\r\n\t\t\t\tlet fd = new FormData()\r\n\t\t\t\tfd.append('file', file, file.name)\r\n\t\t\t\tfor (const key in params) {\r\n\t\t\t\t\tfd.append(key, params[key])\r\n\t\t\t\t}\r\n\t\t\t\tinstance.headers.set('Content-Type', 'multipart/form-data')\r\n\t\t\t\tyield instance.requestService.run('post', `${instance.baseUrl}`, {\r\n\t\t\t\t\theaders: instance.headers,\r\n\t\t\t\t\tbody: fd\r\n\t\t\t\t})\r\n\t\t\t\treturn {success: true}\r\n\t\t\t}).then((res) => resolve(res), (err) => {\r\n\t\t\t\tif (options && options.handleError) {\r\n\t\t\t\t\tinstance.handleError(err)\r\n\t\t\t\t}\r\n\t\t\t\treject({error: err || true})\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tread(params): Promise<any> {\r\n\t\tconst instance = this\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tco(function*() {\r\n\t\t\t\treturn yield instance.requestService.run('get', `${instance.baseUrl}/item`, {\r\n\t\t\t\t\theaders: instance.headers,\r\n\t\t\t\t\tparams\r\n\t\t\t\t})\r\n\t\t\t}).then((res) => resolve(res), (err) => {\r\n\t\t\t\tinstance.handleError(err)\r\n\t\t\t\treject({error: true})\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n}\r\n","import {BaseRESTService} from '../index'\nimport {Injectable, Injector} from '@angular/core'\n\n@Injectable()\nexport class ModelRESTServiceProviderService {\n\tmodelRESTServices: {[key: string]: BaseRESTService} = {}\n\n\tconstructor(\n\t\tpublic injector: Injector\n\t) {\n\t}\n\n\tget(componentName: string): BaseRESTService {\n\t\treturn this.modelRESTServices[`${componentName}ModelRESTService`]\n\t}\n\n\tsetServices(data: {[key: string]: BaseRESTService}): void {\n\t\tthis.modelRESTServices = {}\n\t\tObject.keys(data).forEach((key) => {\n\t\t\tthis.modelRESTServices[`${key.charAt(0).toLowerCase()}${key.substr(1, key.length)}`] = this.injector.get(data[key])\n\t\t})\n\t}\n}\n","export const getNested = (\r\n\tparent: any,\r\n\tfield: string,\r\n\toptions?: {arrayItemsShouldBeUnique?: boolean}\r\n): any => {\r\n\tif ((typeof parent !== 'object') || (parent === null) || (typeof field !== 'string') || !field.length) {\r\n\t\treturn undefined\r\n\t}\r\n\tconst {arrayItemsShouldBeUnique} = (options || ({} as any))\r\n\tlet fieldData = field.split('.'),\r\n\t\tfieldDataLength = fieldData.length,\r\n\t\tcurrentElement = parent\r\n\tfor (let i = 0; i < fieldDataLength; i++) {\r\n\t\tif ((typeof currentElement === 'undefined') || (currentElement === null)) {\r\n\t\t\treturn undefined\r\n\t\t}\r\n\t\tlet innerElementName = fieldData[i]\r\n\t\t// logic for handling sequelize-style $foo.bar$ - should be treated as a single element\r\n\t\tif (innerElementName.charAt(0) === '$') {\r\n\t\t\tlet closingBracketFound = false,\r\n\t\t\t\tclosingBracketIndex = i + 1\r\n\t\t\twhile (closingBracketIndex < fieldDataLength) {\r\n\t\t\t\tconst element = fieldData[closingBracketIndex]\r\n\t\t\t\t// false alarm - there's another $ opening before the current one closed - so the current one must be just a variable name, not a bracket\r\n\t\t\t\tif (element.charAt(0) === '$') {\r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t\t// found it !\r\n\t\t\t\tif (element.charAt(element.length - 1) === '$') {\r\n\t\t\t\t\tclosingBracketFound = true\r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t\tclosingBracketIndex++\r\n\t\t\t}\r\n\t\t\tif (closingBracketFound) {\r\n\t\t\t\tfor (let j = i + 1; j <= closingBracketIndex; j++) {\r\n\t\t\t\t\tinnerElementName += `.${fieldData[j]}`\r\n\t\t\t\t}\r\n\t\t\t\ti = closingBracketIndex\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet nextElement = currentElement[innerElementName]\r\n\t\tif (typeof nextElement === 'undefined') {\r\n\t\t\treturn undefined\r\n\t\t}\r\n\t\t// if the next element is an array, prepare to return an array of the inner items\r\n\t\tif (nextElement instanceof Array) {\r\n\t\t\t// if this is the last item, just return the array\r\n\t\t\tif (i === (fieldDataLength - 1)) {\r\n\t\t\t\treturn nextElement\r\n\t\t\t}\r\n\t\t\t// if the next item is not an index, recursively call self for each item of the array\r\n\t\t\tif (isNaN(parseInt(fieldData[i + 1], 10))) {\r\n\t\t\t\tcurrentElement = []\r\n\t\t\t\tlet innerPath = ''\r\n\t\t\t\tfor (let j = i + 1; j < fieldDataLength; j++) {\r\n\t\t\t\t\tinnerPath += `${fieldData[j]}${j < (fieldDataLength - 1) ? '.' : ''}`\r\n\t\t\t\t}\r\n\t\t\t\tnextElement.forEach((item) => {\r\n\t\t\t\t\tlet innerValue = getNested(item, innerPath)\r\n\t\t\t\t\tif (typeof innerValue !== 'undefined') {\r\n\t\t\t\t\t\t// if the innerValue is an array too, merge it with the currentElement - this way we can have nested arrays without indexes\r\n\t\t\t\t\t\tif (innerValue instanceof Array) {\r\n\t\t\t\t\t\t\tinnerValue.forEach((innerValueItem) => {\r\n\t\t\t\t\t\t\t\tif (!arrayItemsShouldBeUnique || (arrayItemsShouldBeUnique && (currentElement.indexOf(innerValueItem) === -1))) {\r\n\t\t\t\t\t\t\t\t\tcurrentElement.push(innerValueItem)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!arrayItemsShouldBeUnique || (arrayItemsShouldBeUnique && (currentElement.indexOf(innerValue) === -1))) {\r\n\t\t\t\t\t\t\tcurrentElement.push(innerValue)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn currentElement\r\n\t\t\t}\r\n\t\t}\r\n\t\tcurrentElement = nextElement\r\n\t}\r\n\treturn currentElement\r\n}\r\n\r\nexport const setNested = (parent: any, field: string, value: any): boolean => {\r\n\tconst fieldNames = field.split('.')\r\n\tif (!fieldNames.length) {\r\n\t\treturn false\r\n\t}\r\n\tlet currentParent = parent,\r\n\t\tloopEnd = fieldNames.length - 1\r\n\tfor (let i = 0; i < loopEnd; i++) {\r\n\t\tconst fieldName = fieldNames[i]\r\n\t\tif (typeof currentParent[fieldName] === 'undefined') {\r\n\t\t\treturn false\r\n\t\t}\r\n\t\tcurrentParent = currentParent[fieldName]\r\n\t}\r\n\tcurrentParent[fieldNames[loopEnd]] = value\r\n\treturn true\r\n}\r\n","// angular dependencies\r\nimport {CommonModule} from '@angular/common'\r\nimport {NgModule} from '@angular/core'\r\n\r\nimport {ComponentInjector} from './components/componentInjector/componentInjector.component'\r\nimport {ComponentInjectorAreaDirective} from './components/componentInjector/componentInjector.directive'\r\n\r\n\r\n@NgModule({\r\n\timports: [\r\n\t\tCommonModule\r\n\t],\r\n\tdeclarations: [\r\n\t\tComponentInjector,\r\n\t\tComponentInjectorAreaDirective\r\n\t],\r\n\texports: [\r\n\t\tComponentInjector\r\n\t]\r\n})\r\nexport class RamsterUICoreModule {}\r\n\r\nexport * from './components/base-layout.component'\r\nexport * from './components/base-page.component'\r\n// export {ComponentInjector}\r\nexport * from './services/baseREST.service'\r\nexport * from './services/filesREST.service'\r\nexport * from './services/globalEvents/globalEvents.service'\r\nexport * from './services/globalEvents/globalEvents.interfaces'\r\nexport * from './services/modelRESTServiceProvider.service'\r\nexport * from './services/request.service'\r\nexport * from './utils/toolbelt'\r\nexport * from './interfaces/selectList.interface'\r\n"]}